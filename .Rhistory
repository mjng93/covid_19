for (i in (1:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"ObservationDate"],y=covid.agg[covid.agg$Country.Region==top.countries[i],"deaths"],col=colors[i])
}
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
us=as.data.frame(group_by(us.all,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)) %>% mutate(since_start=ObservationDate-min(ObservationDate)))
head(us)
min(us$ObservationDate)
us$ObservationDate-min(us$ObservationDate)
tail(us)
us.all=subset(covid,Country.Region=="US")
us=as.data.frame(group_by(us.all,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)) %>% mutate(since_start=ObservationDate-min(ObservationDate,na.rm = T)))
tail(us)
us.all=subset(covid,Country.Region=="US")
us=as.data.frame(group_by(us.all,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered),start=min(ObservationDate)) %>% mutate(since_start=ObservationDate-start))
head(us)
covid.agg=as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered),start=min(ObservationDate)) %>% mutate(since_start=ObservationDate-start))
head(covid.agg)
tail(covid.agg)
head(covid.agg)
covid.agg=as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
covid.agg=as.data.frame(group_by(covid, Country.Region) %>% summarise(start=min(ObservationDate)) %>% mutate(since_start=ObservationDate-start))
covid.agg=as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
covid.agg=as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
covid.agg=as.data.frame(group_by(covid.agg, Country.Region) %>% summarise(start=min(ObservationDate)) %>% mutate(since_start=ObservationDate-start))
covid.agg=as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
covid.agg=as.data.frame(group_by(covid.agg, Country.Region) %>% summarise(start=min(ObservationDate)) %>% mutate(since_start=ObservationDate-start))
covid.agg=as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
covid.agg.c=as.data.frame(group_by(covid.agg, Country.Region) %>% summarise(start=min(ObservationDate)))
head(covid.agg.c)
covid.agg=merge(covid.agg,covid.agg.c,by="Country.Region",all=FALSE)
head(covid.agg)
covid.agg$since_start=covid.agg$ObservationDate-covid.agg$start
head(covid.agg)
top.countries
covid.agg.top=subset(covid.agg,confirmed>300)
top.countries=unique(covid.agg.top$Country.Region)
top.countries
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"],type='l',xlab="date",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,40000))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"],col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"],type='l',xlab="date",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,40000))
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"],type='l',xlab="date",ylab="count",main="Confirmed COVID-19 Cases")
covid.agg$Country.Region==top.countries[1],"since_start"]
covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"]
covid.agg[covid.agg$Country.Region==top.countries[1],]
covid.agg=arrange(covid.agg,ObservationDate)
covid.agg[covid.agg$Country.Region==top.countries[1],]
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"],type='l',xlab="date",ylab="count",main="Confirmed COVID-19 Cases")
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"],col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"],type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,40000))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start"],y=covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"],col=colors[i])
}
subset(covid.agg,since_start< 20 & confirmed > 10000)
subset(covid.agg,since_start< 20 & confirmed > 10000 & Country.Region!="Mainland China")
subset(covid.agg,since_start< 20 & confirmed > 1000 & Country.Region!="Mainland China")
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,40000))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"]),col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases")
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"]),col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,25))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"]),col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start"],y=log(covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"]),col=colors[i])
}
subset(covid.agg,since_start< 20 & confirmed > 1000 & Country.Region!="Mainland China")
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
head(covid.agg.c)
subset(covid,Country.Region=="Azerbaijan")
subset(covid.agg,Country.Region=="Azerbaijan")
subset(covid.agg,confirmed>=100)
head(subset(covid.agg,confirmed>=100))
tail(subset(covid.agg,confirmed>=100))
head(covid.agg.c.100)
tai(covid.agg.c.100)
tail(covid.agg.c.100)
covid.agg.c.100
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>=-20,"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i]  & covid.agg$since_start_100>=-20,"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"]),col=colors[i])
}
write.csv(covid.agg,"C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_agg.csv",row.names = FALSE,na="")
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] ,"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
colnames(covid.agg)
covid.agg.confirmed=dcast(covid.agg,ObservationDate+since_start+since_start_100~Country.Region,value.var="confirmed")
covid.agg.confirmed=dcast(covid.agg,ObservationDate+since_start+since_start_100~Country.Region,value.var="confirmed")
write.csv(covid.agg.confirmed,"C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_confirmed.csv",row.names = FALSE,na="")
covid.agg.confirmed=dcast(covid.agg,since_start_100~Country.Region,value.var="confirmed")
write.csv(covid.agg.confirmed,"C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_confirmed.csv",row.names = FALSE,na="")
colnames(covid.agg)
measures=c("confirmed","deaths","Recovered")
for (i in 1:3){
covid.agg[,paste0(measures[i],".log")]=log(covid.agg[,measures[i]])
}
colnames(covid.agg)
head(covid.agg)
tail(covid.agg)
covid.agg.confirmed.log=dcast(covid.agg,since_start_100~Country.Region,value.var="confirmed.log")
write.csv(covid.agg.confirmed,"C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_confirmed.csv",row.names = FALSE,na="")
write.csv(covid.agg.confirmed.log,"C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_confirmed.csv",row.names = FALSE,na="")
covid.agg.confirmed=dcast(covid.agg,since_start_100~Country.Region,value.var="confirmed")
covid.agg.confirmed.log=dcast(covid.agg,since_start_100~Country.Region,value.var="confirmed.log")
write.csv(covid.agg.confirmed,"C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_confirmed.csv",row.names = FALSE,na="")
write.csv(covid.agg.confirmed.log,"C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_confirmed_log.csv",row.names = FALSE,na="")
subset(covid.agg,Country.Region=="Australia")
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] ,"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"]),col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>-40 ,"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start_100"] & covid.agg$since_start_100>-40,y=log(covid.agg[covid.agg$Country.Region==top.countries[i],"confirmed"]),col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-40 ),"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1],"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-40 ),"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-40 ),"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-40 ),"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-40 ),"confirmed"]),type='l',xlab="Since Start",ylab="count",main="Confirmed COVID-19 Cases",ylim=c(0,12))
colors=heat.colors(30, alpha = 1, rev = FALSE)
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i],"since_start_100"] & covid.agg$since_start_100>(-40 ),y=log(covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-40 ),"confirmed"]),col=colors[i])
}
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-40 ),"since_start_100"] ,y=log(covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-40 ),"confirmed"]),col=colors[i])
}
head(covid.agg)
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-1 ),"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-1 ),"deaths"]),type='l',xlab="Days since 100th case",ylab="count",main="COVID-19 Deaths",ylim=c(min(covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-1 ),"deaths.log"]),12),xlim=c(-1,56))
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-1 ),"since_start_100"] ,y=covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-1 ),"deaths.log"],col=colors[i])
}
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-1 ),"since_start_100"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_start_100>(-1 ),"deaths"]),type='l',xlab="Days since 100th case",ylab="count",main="COVID-19 Deaths",ylim=c(0,10),xlim=c(-1,56))
for (i in (2:length(top.countries))){
lines(x=covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-1 ),"since_start_100"] ,y=covid.agg[covid.agg$Country.Region==top.countries[i] & covid.agg$since_start_100>(-1 ),"deaths.log"],col=colors[i])
}
as.data.frame(group_by(covid.agg, Country.Region) %>% summarise(start=min(ObservationDate)))
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
plot(x=covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_death_10>(-1 ),"since_death_10"],y=log(covid.agg[covid.agg$Country.Region==top.countries[1] & covid.agg$since_death_10>(-1 ),"deaths"]),type='l',xlab="Days since 10th death",ylab="log count",main="COVID-19 Deaths",ylim=c(0,10),xlim=c(-1,56))
head(us)
tail(us)
log(118)
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
top.countries
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
?cm.colors
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
rm(list=ls())
library(nflscrapR)
library(ggplot2)
library(dplyr)
library(tidyr)
library(RColorBrewer)
library(reshape2)
library(zoo)
covid <- read.csv("C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_data.csv",stringsAsFactors = FALSE)
covid$ObservationDate=as.Date(covid$ObservationDate,format="%m/%d/%Y")
colors=rainbow(15, alpha = 1, rev = FALSE)
#aggregate across states/cities
us.all=subset(covid,Country.Region=="US")
us=as.data.frame(group_by(us.all,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
us$ObservationDate=as.Date(us$ObservationDate)
covid.agg=as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
covid.agg=merge(as.data.frame(group_by(covid.agg, Country.Region) %>% summarise(start=min(ObservationDate))),by=c("Country.Region"),all=FALSE)
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid.r')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
rm(list=ls())
library(nflscrapR)
library(ggplot2)
library(dplyr)
library(tidyr)
library(RColorBrewer)
library(reshape2)
library(zoo)
covid <- read.csv("C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_data.csv",stringsAsFactors = FALSE)
covid$ObservationDate=as.Date(covid$ObservationDate,format="%m/%d/%Y")
head(covid.agg)
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
head(covid.agg)
head(us)
us.all=subset(covid,Country.Region=="US")
us=as.data.frame(group_by(us.all,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
head(us)
head(us)
covid <- read.csv("C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_data.csv",stringsAsFactors = FALSE)
head(covid)
covid$ObservationDate=as.Date(covid$ObservationDate,format="%m/%d/%Y")
us.all=subset(covid,Country.Region=="US")
head(us)
head(us.all)
us=as.data.frame(group_by(us.all,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
head(us)
us=as.data.frame(group_by(us.all,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
head(us)
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
source("C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r")
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
?group_by
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_interactive_mod.R')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
colnames(covid.agg)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(covid.agg)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(melt(covid.agg[,c("Country.Region","ObservationDate","confirmed")],id.vars=c("ObservationDate","Country.Region")))
test=melt(covid.agg[,c("Country.Region","ObservationDate","confirmed")],id.vars=c("ObservationDate","Country.Region"))
colnames(test)=c("xval","Country.Region","variable","value")
head(test)
head(dcast(test,xval~variable,value.var='value',mean))
head(dcast(test,xval+Country.Region~variable,value.var='value',mean))
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(test)
head(covid.agg)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
as.Date(188339)
as.Date(18339)
as.Date(18339.00)
max(df1$xval>100,na.rm=T)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(test)
test=melt(covid.agg[,c("Country.Region","ObservationDate","confirmed")],id.vars=c("ObservationDate","Country.Region"))
head(test)
colnames(test)=c("xval","Country.Region","variable","value")
head(test)
test.corr=dcast(test,xval~variable,value.var="value",mean)
head(test.corr)
test.corr=dcast(test,xval~variable+Country.Region,value.var="value",mean)
head(test.corr)
=cor(na.omit(as.matrix(df.corr[,-c(1)])))
cor(na.omit(as.matrix(df.corr[,-c(1)])))
cor(na.omit(as.matrix(test.corr[,-c(1)])))
colnames(test.corr)
rownames(test.corr)=colnames(test.corr)[-c(1)]
rownames(test.corr)
colnames(test.corr)
nrow(test.corr)
test.corr1=cor(na.omit(as.matrix(df.corr[,-c(1)])))
test.corr1=cor(na.omit(as.matrix(test.corr[,-c(1)])))
nrow(test.corr)
nrow(test.corr1)
ncol(test.corr1)
ncol(test.corr)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
?diff
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
tail(diff(subset(covid.agg,Country.Region=="US")[,c("deaths")]))
tail(diff(subset(covid.agg,Country.Region=="US")[,c("deaths")],lag=1))
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
tail(Delt(subset(covid.agg,Country.Region=="US")[,c("deaths")],k=1))
tail(Delt(subset(covid.agg,Country.Region=="US")[,c("deaths")],k=1)*100)
tail(log(subset(covid.agg,Country.Region=="US")[,c("deaths")]))
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
tail(as.numeric(c(NA,diff(subset(covid.agg,Country.Region=="US")[,c("deaths")],lag=1))))
tail(as.numeric(c(NA,diff(subset(covid.agg,Country.Region=="US")[,c("confirmed")],lag=1))))
test=melt(covid.agg[,c("Country.Region","ObservationDate","confirmed")],id.vars=c("ObservationDate","Country.Region"))
head(test)
test.diff=covid.agg
test.us=subset(covid.agg,Country.Region=="US")
head(test.us)
test.us$deaths=c(NA,diff(test.us$deaths,lag=1))
tail(test.us)
test.us=melt(test.us[,c("Country.Region","ObservationDate","deaths")],id.vars=c("ObservationDate","Country.Region"))
tail(test.us)
head(covid.agg)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(covid.agg)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
?ddply
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(subset(covid.agg,select=-c(confirmed)))
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
as.data.frame(group_by(covid,ObservationDate, Country.Region) %>% summarise(confirmed = sum(Confirmed),deaths=sum(Deaths),Recovered=sum(Recovered)))
tail(as.data.frame(group_by_(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(input$ystat,lag=1))))))
)
tail(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(input$ystat,lag=1))))))
)
tail(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
)
tail(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
,20)
tail(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
,20)
head(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
,20)
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
,20)
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
)
max(help$test)
diff(covid.agg$deaths)
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
)
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","deaths")],ObservationDate,Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
)
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","deaths")],Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1)))))))
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],Country.Region) %>% summarise(test=as.numeric(as.vector(c(0,diff(deaths,lag=1)))))))
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],Country.Region) %>% mutate(test=as.numeric(as.vector(c(0,diff(deaths,lag=1)))))))
head(help)
tail(help)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
help=(as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],Country.Region) %>% mutate(test=as.numeric(as.vector(c(0,diff(deaths,lag=1)))))))
)
/q
head(help)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
test=covid.agg[,c("Country.Region","ObservationDate","deaths")]
head(test)
tail(test)
test.diff=as.data.frame(group_by(test,Country.Region) %>% mutate(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
head(test.diff)
tail(test.diff)
test.diff$deaths=test.diff$test
tail(test.diff)
test.diff=subset(test.diff,select=-c(test))
tail(test.diff)
test.diff1=melt(test.idff,id.vars=c("ObservationDate","Country.Region"))
test.diff1=melt(test.diff,id.vars=c("ObservationDate","Country.Region"))
head(test.diff1)
tail(test.diff1)
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
test.diff=as.data.frame(group_by(covid.agg[,c("Country.Region","ObservationDate","deaths")],Country.Region) %>% mutate(test=as.numeric(as.vector(c(0,diff(deaths,lag=1))))))
head(test.diff)
tail(test.diff)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
?diff
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
arrange(covid.agg,ObservationDate)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
tail(us)
us
=16/1
Delt(us$deaths,k=1)
Delt(us$deaths,k=7)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(covid.agg)
tail(gsub(Inf,NA,covid.agg$deaths.log))
head(gsub(Inf,NA,covid.agg$deaths.log))
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(gsub(Inf,NA,covid.agg$deaths.log))
head(as.numeric()gsub(Inf,NA,covid.agg$deaths.log))
head(as.numeric(gsub(Inf,NA,covid.agg$deaths.log))
)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
?rollapply
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(us)
rollapply(us$confirmed,width=7,fill=NA)
rollapply(us$confirmed,width=7,fun=mean(),fill=NA)
rollapply(us$confirmed,width=7,fun=mean,fill=NA)
rollapply(us$confirmed,width=7,FUN=mean,fill=NA)
rollapply(us$confirmed,width=7,FUN=mean,fill=NA,align='right')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
head(covid.agg)
head(covid)
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
head(covid)
length(unique(covid$Province.State))
covid <- read.csv("C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19_data.csv",stringsAsFactors = FALSE)
covid$ObservationDate=as.Date(covid$ObservationDate,format="%m/%d/%Y")
length(unique(covid$Province.State))
covid=merge(covid,as.data.frame(group_by(covid, Province.State) %>% summarise(start=min(ObservationDate))),by=c("Province.State"),all=FALSE) #add date of first case
length(unique(covid$Province.State))
covid=merge(covid,as.data.frame(group_by(covid, Province.State) %>% filter(Confirmed>=100) %>% summarise(start.c.100=min(ObservationDate))),by="Province.State",all=FALSE) # add date of 100th case
length(unique(covid$Province.State))
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid.r')
length(unique(covid$Province.State))
head(covid)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
colnames(covid.agg)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_app.R')
install.packages('rsconnect')
install.packages("rsconnect")
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
head(covid)
length(unqiue(covid$Province.State))
length(unique(covid$Province.State))
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('covid_app.R')
runApp('covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
colnames(covid)
colnames(covid.agg)
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
colnames(covid)
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid.r')
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid.r')
library(shiny); runApp('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid_app.R')
source('C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19/covid.r')
setwd("C:/Users/micha/Dropbox/Files/Projects/covid_19/covid_19")
us.tests=read.csv("https://covidtracking.com/api/us/daily.csv")
head(us.tests)
us.tests=read.csv("https://covidtracking.com/api/us/daily.csv")
head(us.tests)
tests=read.csv("https://covidtracking.com/api/states/daily.csv")
head(tests)
library(shiny); runApp('covid_app.R')
library(shiny); runApp('covid_app.R')
runApp('covid_app.R')
runApp('covid_app.R')
runApp('covid_app.R')
runApp('covid_app.R')
Sys.Date()
max(covid.kaggle$ObservationDate,na.rm = T)
